<!DOCTYPE html>
<html>
<head>
  <title>Nonprofit Revenue Model Explorer</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    .slider { width: 300px; }
    .output { margin-top: 20px; }
    .positive { color: green; }
    .negative { color: red; }
    button { margin-top: 10px; padding: 5px 10px; }
    .input-box { width: 80px; margin-left: 10px; }
  </style>
  <script>
  // Password protection
  let password = prompt("Enter password to access the Nonprofit Revenue Model Explorer:");
  if (password !== "davids") {
    alert("Incorrect password. Access denied.");
    window.location = "about:blank"; // Redirects to a blank page on wrong password
  }
</script>
</head>
<body>
  <h2>Nonprofit Revenue Model Explorer (monthly)</h2><p>Note: Option 1 and 2 default to values to get same rev as current model @ -90% ad spend ROI. Option 3 is an algo that seems optimized for all? (and only requires orgs to make $100+/mo from $10k in ads to scale)</p>
  <label title="Monthly Google Ad Grants spend per org">Ad Spend ($/month): <input type="range" min="0" max="10000" value="10000" id="adSpend" class="slider" oninput="update()"></label>
  <span id="adSpendValue">10000</span><br>
  <label title="Extra sales generated by ads per org">Incremental Revenue ($/month): 
    <input type="range" min="0" max="15000" value="1000" id="revenue" class="slider" oninput="updateRevenueInput()">
    <input type="number" min="0" max="15000" value="1000" id="revenueInput" class="input-box" oninput="updateRevenueSlider()">
  </label>
  <span id="revenueValue">1000</span><br>
  <label title="Fixed % of ad spend as a base fee">Groas Base Fee (%): <input type="range" min="0" max="5" step="0.1" value="2" id="baseFee" class="slider" oninput="update()"></label>
  <span id="baseFeeValue">2</span><br>
  <label title="% of incremental revenue shared">Revenue Share (%): <input type="range" min="0" max="50" value="0" id="revShare" class="slider" oninput="update()"></label>
  <span id="revShareValue">0</span><br>
  <label title="Your % of total fees collected">Your Split (%): <input type="range" min="0" max="100" value="50" id="yourSplit" class="slider" oninput="update()"></label>
  <span id="yourSplitValue">50</span><br>
  <label title="Number of nonprofits in the model">Number of Orgs: <input type="range" min="1" max="200" value="1" id="numOrgs" class="slider" oninput="update()"></label>
  <span id="numOrgsValue">1</span><br>

  <button onclick="setOption1()">Option 1: Pure Revenue-Share</button>
  <button onclick="setOption2()">Option 2: Revenue-Share + Min Fee</button>
<button onclick="setOption3()">Option 3: Optimized Equilibrium</button>
  <button onclick="reset()">Reset to Defaults</button>
<div style="margin-top: 20px; max-width: 600px;">
  <p><b>how option 3 works (optimized equilibrium):</b></p>
  <p>nonprofits get zero risk—cost never tops their ad-driven revenue ($0 revenue = $100 cost from us). groas gets a 1% ad spend minimum ($100/org), covered by david a fronting up to $100/org for the first 3 orgs if revenue’s low. beyond 3 orgs, we split any shortfall 50/50 (e.g., $0 rev = $50 each cost). revenue share starts at 0% below $100, ramps linearly to 25% from $100 to $1100, then caps at 25%—so David A. catchs up at $731/mo in org rev. keeps it fair—nonprofits win big, groas grows, and i get ROI with scale. tweak the sliders to test it!</p>
</div>
  <div class="output">
    <p>Nonprofit Cost (Total): $<span id="nonprofitCost">200</span></p>
    <p>Groas Fee: $<span id="groasFee">100</span></p>
    <p>David A Fee: $<span id="yourFee">100</span></p>
    <p>Nonprofit Net Gain: $<span id="netGain">800</span></p>
    <p>Orgs Needed for $20k: <span id="orgsNeeded">200</span></p>
  </div>

<script>
  function update() {
    let adSpend = parseFloat(document.getElementById("adSpend").value);
    let revenue = parseFloat(document.getElementById("revenue").value);
    let baseFee = parseFloat(document.getElementById("baseFee").value);
    let revShare = parseFloat(document.getElementById("revShare").value);
    let yourSplit = parseFloat(document.getElementById("yourSplit").value);
    let numOrgs = parseFloat(document.getElementById("numOrgs").value);

    document.getElementById("adSpendValue").innerText = adSpend;
    document.getElementById("revenueValue").innerText = revenue;
    document.getElementById("baseFeeValue").innerText = baseFee;
    document.getElementById("revShareValue").innerText = revShare;
    document.getElementById("yourSplitValue").innerText = yourSplit;
    document.getElementById("numOrgsValue").innerText = numOrgs;

    let nonprofitCostPerOrg;
    // Optimized equilibrium logic for Option 3 (revShare slider at 25%)
    if (baseFee === 1 && revShare === 25) {
      let baseCost = adSpend * (baseFee / 100);
      let threshold = baseCost; // $100 at 1% base
      let maxRevShare = 25; // Cap at 25%
      let stepRange = 1000; // $100 to $1100 range
      let dynamicP = revenue <= threshold ? 0 : 
                     revenue <= (threshold + stepRange) ? maxRevShare * ((revenue - threshold) / stepRange) :
                     maxRevShare;
      let revShareCost = revenue > threshold ? (dynamicP / 100) * (revenue - threshold) : 0;
      nonprofitCostPerOrg = baseCost + revShareCost;
    } else {
      // Basic math for other options
      let baseCost = adSpend * (baseFee / 100);
      let revShareCost = revenue * (revShare / 100);
      nonprofitCostPerOrg = baseCost + revShareCost;
    }

    let totalCost = nonprofitCostPerOrg * numOrgs;
    let groasFeePerOrg = nonprofitCostPerOrg * ((100 - yourSplit) / 100);
    let yourFeePerOrg = nonprofitCostPerOrg * (yourSplit / 100);
    let groasFee = groasFeePerOrg * numOrgs;
    let yourFee = yourFeePerOrg * numOrgs;
    let netGain = (revenue * numOrgs) - totalCost;

    // Risk adjustment
    if (numOrgs <= 3 && groasFeePerOrg < 100) {
      let shortfallPerOrg = Math.min(100 - groasFeePerOrg, 100); // Your risk capped at $100/org
      groasFee = 100 * numOrgs; // Groas gets minimum
      yourFee -= shortfallPerOrg * numOrgs; // Your risk, max $300 total
      totalCost = groasFee + yourFee;
      netGain = (revenue * numOrgs) - totalCost;
    } else if (numOrgs > 3 && groasFeePerOrg < 100) {
      let shortfallPerOrg = (100 - groasFeePerOrg) / 2; // Shared risk
      groasFee += shortfallPerOrg * numOrgs;
      yourFee -= shortfallPerOrg * numOrgs;
      totalCost = groasFee + yourFee;
      netGain = (revenue * numOrgs) - totalCost;
    }

    document.getElementById("nonprofitCost").innerText = Math.round(totalCost);
    document.getElementById("groasFee").innerText = Math.round(groasFee);
    document.getElementById("yourFee").innerText = Math.round(yourFee);
    document.getElementById("netGain").innerText = Math.round(netGain);
    document.getElementById("netGain").className = netGain >= 0 ? "positive" : "negative";
    document.getElementById("orgsNeeded").innerText = yourFeePerOrg > 0 ? Math.ceil(20000 / yourFeePerOrg) : "N/A";
  }

  function updateRevenueInput() {
    let revenue = parseFloat(document.getElementById("revenue").value);
    document.getElementById("revenueInput").value = revenue;
    update();
  }

  function updateRevenueSlider() {
    let revenueInput = parseFloat(document.getElementById("revenueInput").value);
    if (revenueInput >= 0 && revenueInput <= 15000) {
      document.getElementById("revenue").value = revenueInput;
    } else if (revenueInput < 0) {
      document.getElementById("revenue").value = 0;
      document.getElementById("revenueInput").value = 0;
    } else {
      document.getElementById("revenue").value = 15000;
      document.getElementById("revenueInput").value = 15000;
    }
    update();
  }

  function setOption1() {
    document.getElementById("adSpend").value = 10000;
    document.getElementById("baseFee").value = 0;
    document.getElementById("revShare").value = 20;
    document.getElementById("yourSplit").value = 50;
    document.getElementById("numOrgs").value = 1;
    update();
  }

  function setOption2() {
    document.getElementById("adSpend").value = 10000;
    document.getElementById("baseFee").value = 0.5;
    document.getElementById("revShare").value = 15;
    document.getElementById("yourSplit").value = 50;
    document.getElementById("numOrgs").value = 1;
    update();
  }

  function setOption3() {
    document.getElementById("adSpend").value = 10000;
    document.getElementById("revenue").value = 731;
    document.getElementById("revenueInput").value = 731;
    document.getElementById("baseFee").value = 1;
    document.getElementById("revShare").value = 25; // Triggers optimized logic
    document.getElementById("yourSplit").value = 50;
    document.getElementById("numOrgs").value = 1;
    update();
  }

  function reset() {
    document.getElementById("adSpend").value = 10000;
    document.getElementById("revenue").value = 1000;
    document.getElementById("revenueInput").value = 1000;
    document.getElementById("baseFee").value = 2;
    document.getElementById("revShare").value = 0;
    document.getElementById("yourSplit").value = 50;
    document.getElementById("numOrgs").value = 1;
    update();
  }

  window.onload = update;
</script>
</body>
</html>
